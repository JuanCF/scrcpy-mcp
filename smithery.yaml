# Smithery configuration file: https://smithery.ai/docs/build/project-config/smithery-yaml
#
# NOTE: scrcpy-mcp requires a physical Android device connected via ADB.
# It cannot be cloud-hosted and must run locally on the machine where
# the device is connected.

startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      androidSerial:
        type: string
        description: >
          Target device serial number (from `adb devices`). Required when
          multiple devices are connected. Equivalent to ANDROID_SERIAL env var.
      adbPath:
        type: string
        description: >
          Custom path to the adb binary. Defaults to 'adb' on PATH.
          Equivalent to ADB_PATH env var.
      scrcpyServerPath:
        type: string
        description: >
          Path to the scrcpy-server.jar file. Only needed if scrcpy-server is
          not installed in a standard location. Equivalent to SCRCPY_SERVER_PATH env var.

commandFunction: |-
  (config) => ({
    command: 'node',
    args: ['./dist/index.js'],
    env: {
      ...(config.androidSerial ? { ANDROID_SERIAL: config.androidSerial } : {}),
      ...(config.adbPath ? { ADB_PATH: config.adbPath } : {}),
      ...(config.scrcpyServerPath ? { SCRCPY_SERVER_PATH: config.scrcpyServerPath } : {}),
    }
  })
